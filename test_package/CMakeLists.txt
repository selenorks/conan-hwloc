PROJECT(MyHello)
cmake_minimum_required(VERSION 3.0)

include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)

CONAN_BASIC_SETUP()

find_package(Hwloc)

IF(HWLOC_FOUND)
    include_directories(${HWLOC_INCLUDE_DIRS})
    ADD_EXECUTABLE(main main.c)
    TARGET_LINK_LIBRARIES(main ${HWLOC_LIBRARIES})
    IF(UNIX)
        find_library (PCIACCESS pciaccess)
        if(PCIACCESS)
            TARGET_LINK_LIBRARIES(main ${PCIACCESS})
        endif()
        find_library (NUMA numa)
        if(NUMA)
            TARGET_LINK_LIBRARIES(main ${NUMA})
        endif()
    endif()
ELSE()
    MESSAGE(FATAL_ERROR "HWLOC NOT FOUND!")
ENDIF()
